<?xml version="1.0"?>

<project name="vaadin-server" basedir="." default="publish-local" xmlns:ivy="antlib:org.apache.ivy.ant">
	<description>
		Compiles build helpers used when building other modules.
	</description>
	<include file="../common.xml" as="common" />
	<include file="../build.xml" as="vaadin" />
	<include file="../gwt-files.xml" as="gwtfiles" />

	<!-- global properties -->
	<property name="module.name" value="vaadin-server" />
	<property name="module.symbolic" value="com.vaadin.server" />
	<property name="result.dir" value="result" />
	<path id="classpath.compile.custom" />
	<path id="classpath.tests.custom" />

	<union id="jar.includes">
		<union refid="server.gwt.includes" />
		<fileset dir="${vaadin.basedir}/WebContent">
			<include name="VAADIN/vaadinBootstrap.js" />
		</fileset>
	</union>

	<target name="jar">
		<property name="server.osgi.import" value="javax.servlet;version=&quot;2.4.0&quot;,javax.servlet.http;version=&quot;2.4.0&quot;,org.jsoup;version=&quot;1.6.3&quot;,org.jsoup.parser;version=&quot;1.6.3&quot;,org.jsoup.nodes;version=&quot;1.6.3&quot;,org.jsoup.helper;version=&quot;1.6.3&quot;,org.jsoup.safety;version=&quot;1.6.3&quot;,org.json;version=&quot;0.0.20080701&quot;" />
		<antcall target="common.jar">
			<param name="require-bundle" value="com.vaadin.shared;bundle-version=&quot;${vaadin.version}&quot;"/>
			<param name="import-package" value="${server.osgi.import}" />
			<param name="osgi.extra.package.prefixes" value="VAADIN" />
			<reference torefid="extra.jar.includes" refid="jar.includes" />
		</antcall>
	</target>

	<target name="publish-local" depends="jar">
		<antcall target="common.sources.jar" />
		<antcall target="common.javadoc.jar" />

		<antcall target="common.publish-local" />
	</target>

	<target name="clean">
		<antcall target="common.clean" />
	</target>

	<target name="checkstyle">
		<property name="cs.src" location="src"/>
		<antcall target="common.checkstyle"/>
	</target>
	
	<target name="tests" depends="checkstyle">
		<antcall target="common.tests.run" />
	</target>


</project>
